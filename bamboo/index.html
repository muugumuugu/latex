<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BambooMart - Handcrafted Bamboo Products Delivery</title>
    <meta name="description" content="Order authentic handcrafted bamboo products with instant local delivery. Doors, Furniture, Decor, Religious items and more.">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body { 
            margin: 0; 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;
            -webkit-font-smoothing: antialiased;
        }
        #root { min-height: 100vh; }
        * { box-sizing: border-box; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Simple Icons (inline SVG components)
        const Icon = ({ name, size = 24, className = '' }) => {
            const icons = {
                shoppingCart: <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>,
                search: <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>,
                home: <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>,
                user: <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>,
                package: <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}><path d="M16.5 9.4 7.55 4.24"/><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg>,
                star: <svg width={size} height={size} viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" className={className}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>,
                mapPin: <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>,
                phone: <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>,
                mail: <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}><rect x="2" y="4" width="20" height="16" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>,
                arrowLeft: <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>,
                plus: <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>,
                minus: <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}><line x1="5" y1="12" x2="19" y2="12"/></svg>,
                trash: <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>,
                check: <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}><polyline points="20 6 9 17 4 12"/></svg>,
                settings: <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6m6.366-13.366-3 3m-6.732 6.732-3 3M1 12h6m6 0h6m-13.366 6.366 3-3m6.732-6.732 3-3"/></svg>,
                edit: <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>,
                save: <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>,
                x: <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>,
                logIn: <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/><polyline points="10 17 15 12 10 7"/><line x1="15" y1="12" x2="3" y2="12"/></svg>,
                logOut: <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
            };
            return icons[name] || null;
        };

        // Mock storage using localStorage
        const mockStorage = {
            async get(key) {
                const value = localStorage.getItem(key);
                return value ? { key, value } : null;
            },
            async set(key, value) {
                localStorage.setItem(key, value);
                return { key, value };
            },
            async delete(key) {
                localStorage.removeItem(key);
                return { key, deleted: true };
            }
        };

        window.storage = mockStorage;

        function App() {
            const [currentScreen, setCurrentScreen] = useState('home');
            const [cart, setCart] = useState([]);
            const [selectedCategory, setSelectedCategory] = useState('All');
            const [searchQuery, setSearchQuery] = useState('');
            const [selectedProduct, setSelectedProduct] = useState(null);
            const [orders, setOrders] = useState([]);
            const [products, setProducts] = useState([]);
            const [categories, setCategories] = useState(['All']);
            const [userInfo, setUserInfo] = useState({ name: '', phone: '', address: '', pincode: '' });
            const [checkoutStep, setCheckoutStep] = useState('details');
            const [isAdmin, setIsAdmin] = useState(false);
            const [adminPassword, setAdminPassword] = useState('');
            const [editingProduct, setEditingProduct] = useState(null);
            const [showAdminLogin, setShowAdminLogin] = useState(false);

            const ADMIN_PASSWORD = 'bamboo2024'; // CHANGE THIS!

            useEffect(() => {
                loadData();
            }, []);

            const loadData = async () => {
                try {
                    const cartData = await window.storage.get('bamboo-cart');
                    const ordersData = await window.storage.get('bamboo-orders');
                    const userInfoData = await window.storage.get('bamboo-user');
                    const productsData = await window.storage.get('bamboo-products');
                    const categoriesData = await window.storage.get('bamboo-categories');
                    
                    if (cartData) setCart(JSON.parse(cartData.value));
                    if (ordersData) setOrders(JSON.parse(ordersData.value));
                    if (userInfoData) setUserInfo(JSON.parse(userInfoData.value));
                    if (productsData) {
                        setProducts(JSON.parse(productsData.value));
                    } else {
                        const defaultProducts = getDefaultProducts();
                        setProducts(defaultProducts);
                        await window.storage.set('bamboo-products', JSON.stringify(defaultProducts));
                    }
                    if (categoriesData) {
                        setCategories(JSON.parse(categoriesData.value));
                    } else {
                        const defaultCategories = ['All', 'Doors', 'Windows', 'Mats', 'Furniture', 'Decor', 'Religious', 'Handicrafts'];
                        setCategories(defaultCategories);
                        await window.storage.set('bamboo-categories', JSON.stringify(defaultCategories));
                    }
                } catch (error) {
                    const defaultProducts = getDefaultProducts();
                    const defaultCategories = ['All', 'Doors', 'Windows', 'Mats', 'Furniture', 'Decor', 'Religious', 'Handicrafts'];
                    setProducts(defaultProducts);
                    setCategories(defaultCategories);
                }
            };

            const getDefaultProducts = () => [
                { id: 1, name: "Bamboo Door (6x3 ft)", category: "Doors", price: 3500, image: "ðŸšª", description: "Handcrafted traditional bamboo door", inStock: true },
                { id: 2, name: "Bamboo Window Frame", category: "Windows", price: 1200, image: "ðŸªŸ", description: "Natural bamboo window frame", inStock: true },
                { id: 3, name: "Prayer Mat", category: "Religious", price: 450, image: "ðŸ§˜", description: "Woven bamboo prayer mat", inStock: true },
                { id: 4, name: "Bamboo Chair", category: "Furniture", price: 2800, image: "ðŸª‘", description: "Comfortable bamboo seating", inStock: true },
                { id: 5, name: "Wall Hanging", category: "Decor", price: 650, image: "ðŸŽ¨", description: "Decorative bamboo art piece", inStock: true },
                { id: 6, name: "Bamboo Basket Set", category: "Handicrafts", price: 890, image: "ðŸ§º", description: "Set of 3 storage baskets", inStock: true },
                { id: 7, name: "Floor Mat (6x4 ft)", category: "Mats", price: 1100, image: "ðŸŸ«", description: "Durable bamboo floor mat", inStock: true },
                { id: 8, name: "Bamboo Lamp", category: "Decor", price: 750, image: "ðŸ’¡", description: "Ambient bamboo table lamp", inStock: true },
                { id: 9, name: "Pooja Thali", category: "Religious", price: 580, image: "ðŸª”", description: "Traditional bamboo prayer plate", inStock: true },
                { id: 10, name: "Bamboo Shelf Unit", category: "Furniture", price: 4200, image: "ðŸ“š", description: "3-tier storage shelf", inStock: true },
            ];

            const saveCart = async (newCart) => {
                setCart(newCart);
                await window.storage.set('bamboo-cart', JSON.stringify(newCart));
            };

            const saveOrders = async (newOrders) => {
                setOrders(newOrders);
                await window.storage.set('bamboo-orders', JSON.stringify(newOrders));
            };

            const saveUserInfo = async (info) => {
                setUserInfo(info);
                await window.storage.set('bamboo-user', JSON.stringify(info));
            };

            const saveProducts = async (newProducts) => {
                setProducts(newProducts);
                await window.storage.set('bamboo-products', JSON.stringify(newProducts));
            };

            const addToCart = (product) => {
                const existing = cart.find(item => item.id === product.id);
                if (existing) {
                    saveCart(cart.map(item => 
                        item.id === product.id ? { ...item, quantity: item.quantity + 1 } : item
                    ));
                } else {
                    saveCart([...cart, { ...product, quantity: 1 }]);
                }
            };

            const updateQuantity = (productId, change) => {
                const newCart = cart.map(item => {
                    if (item.id === productId) {
                        const newQuantity = item.quantity + change;
                        return newQuantity > 0 ? { ...item, quantity: newQuantity } : null;
                    }
                    return item;
                }).filter(Boolean);
                saveCart(newCart);
            };

            const removeFromCart = (productId) => {
                saveCart(cart.filter(item => item.id !== productId));
            };

            const getCartTotal = () => cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const getCartCount = () => cart.reduce((sum, item) => sum + item.quantity, 0);

            const filteredProducts = products.filter(product => {
                const matchesCategory = selectedCategory === 'All' || product.category === selectedCategory;
                const matchesSearch = product.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
                                     product.category.toLowerCase().includes(searchQuery.toLowerCase());
                return matchesCategory && matchesSearch && product.inStock;
            });

            const placeOrder = () => {
                const newOrder = {
                    id: Date.now(),
                    items: [...cart],
                    total: getCartTotal(),
                    user: { ...userInfo },
                    status: 'Ordered',
                    date: new Date().toLocaleDateString(),
                    time: new Date().toLocaleTimeString(),
                    paymentMethod: 'COD'
                };
                
                saveOrders([newOrder, ...orders]);
                saveCart([]);
                setCurrentScreen('orderConfirm');
                setCheckoutStep('details');
            };

            const handleAdminLogin = () => {
                if (adminPassword === ADMIN_PASSWORD) {
                    setIsAdmin(true);
                    setShowAdminLogin(false);
                    setAdminPassword('');
                    setCurrentScreen('admin');
                } else {
                    alert('Incorrect password');
                    setAdminPassword('');
                }
            };

            const handleAdminLogout = () => {
                setIsAdmin(false);
                setCurrentScreen('home');
            };

            const addProduct = () => {
                const newProduct = {
                    id: Date.now(),
                    name: 'New Product',
                    category: categories[1] || 'Uncategorized',
                    price: 0,
                    image: 'ðŸ“¦',
                    description: 'Product description',
                    inStock: true
                };
                setEditingProduct(newProduct);
            };

            const saveProduct = async () => {
                if (!editingProduct.name || !editingProduct.price) {
                    alert('Please fill product name and price');
                    return;
                }
                
                const existingIndex = products.findIndex(p => p.id === editingProduct.id);
                let newProducts;
                
                if (existingIndex >= 0) {
                    newProducts = [...products];
                    newProducts[existingIndex] = editingProduct;
                } else {
                    newProducts = [...products, editingProduct];
                }
                
                await saveProducts(newProducts);
                setEditingProduct(null);
            };

            const deleteProduct = async (productId) => {
                if (confirm('Delete this product?')) {
                    await saveProducts(products.filter(p => p.id !== productId));
                }
            };

            const toggleProductStock = async (productId) => {
                await saveProducts(products.map(p => 
                    p.id === productId ? { ...p, inStock: !p.inStock } : p
                ));
            };

            const updateOrderStatus = async (orderId, newStatus) => {
                await saveOrders(orders.map(order =>
                    order.id === orderId ? { ...order, status: newStatus } : order
                ));
            };

            const Header = ({ title, showBack }) => (
                <div className="bg-gradient-to-r from-green-600 to-green-700 text-white p-4 sticky top-0 z-10 shadow-md">
                    <div className="flex items-center justify-between max-w-4xl mx-auto">
                        <div className="flex items-center gap-3">
                            {showBack && (
                                <button onClick={() => {
                                    if (currentScreen === 'product') setCurrentScreen('home');
                                    else if (currentScreen === 'checkout') setCurrentScreen('cart');
                                    else if (currentScreen === 'orderConfirm') setCurrentScreen('home');
                                    else if (currentScreen === 'admin') handleAdminLogout();
                                    else setCurrentScreen('home');
                                }} className="p-1 hover:bg-green-500 rounded">
                                    <Icon name="arrowLeft" size={24} />
                                </button>
                            )}
                            <h1 className="text-xl font-bold">ðŸŽ‹ {title}</h1>
                        </div>
                        {currentScreen === 'home' && (
                            <div className="flex items-center gap-3">
                                <button onClick={() => setShowAdminLogin(true)} className="p-2 hover:bg-green-500 rounded">
                                    <Icon name="settings" size={20} />
                                </button>
                                <div className="relative">
                                    <Icon name="shoppingCart" size={24} />
                                    {getCartCount() > 0 && (
                                        <span className="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold">
                                            {getCartCount()}
                                        </span>
                                    )}
                                </div>
                            </div>
                        )}
                        {currentScreen === 'admin' && (
                            <button onClick={handleAdminLogout} className="p-2 hover:bg-green-500 rounded flex items-center gap-2">
                                <Icon name="logOut" size={20} />
                                <span className="text-sm">Logout</span>
                            </button>
                        )}
                    </div>
                </div>
            );

            const BottomNav = () => (
                <div className="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg">
                    <div className="flex justify-around max-w-4xl mx-auto">
                        {[
                            { icon: 'home', label: 'Home', screen: 'home' },
                            { icon: 'shoppingCart', label: 'Cart', screen: 'cart', badge: getCartCount() },
                            { icon: 'package', label: 'Orders', screen: 'orders' },
                            { icon: 'user', label: 'Profile', screen: 'profile' }
                        ].map(({ icon, label, screen, badge }) => (
                            <button
                                key={screen}
                                onClick={() => setCurrentScreen(screen)}
                                className={`flex-1 py-3 flex flex-col items-center gap-1 relative ${
                                    currentScreen === screen ? 'text-green-600' : 'text-gray-500'
                                }`}
                            >
                                <Icon name={icon} size={24} />
                                <span className="text-xs">{label}</span>
                                {badge > 0 && (
                                    <span className="absolute top-1 right-1/4 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">
                                        {badge}
                                    </span>
                                )}
                            </button>
                        ))}
                    </div>
                </div>
            );

            const HomeScreen = () => (
                <div className="pb-20">
                    <Header title="BambooMart" />
                    
                    <div className="p-4 bg-gray-50">
                        <div className="relative max-w-4xl mx-auto">
                            <div className="absolute left-3 top-3 text-gray-400">
                                <Icon name="search" size={20} />
                            </div>
                            <input
                                type="text"
                                placeholder="Search bamboo products..."
                                value={searchQuery}
                                onChange={(e) => setSearchQuery(e.target.value)}
                                className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                            />
                        </div>
                    </div>

                    <div className="px-4 py-3 overflow-x-auto bg-white border-b">
                        <div className="flex gap-2 max-w-4xl mx-auto">
                            {categories.map(cat => (
                                <button
                                    key={cat}
                                    onClick={() => setSelectedCategory(cat)}
                                    className={`px-4 py-2 rounded-full whitespace-nowrap font-medium transition ${
                                        selectedCategory === cat
                                            ? 'bg-green-600 text-white'
                                            : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                    }`}
                                >
                                    {cat}
                                </button>
                            ))}
                        </div>
                    </div>

                    <div className="bg-green-50 border-l-4 border-green-600 p-4 mx-4 mt-4 rounded">
                        <p className="text-green-800 font-medium">âš¡ Fast Local Delivery â€¢ Handcrafted with Care</p>
                    </div>

                    <div className="p-4 max-w-4xl mx-auto">
                        <div className="grid grid-cols-2 gap-4">
                            {filteredProducts.map(product => (
                                <div
                                    key={product.id}
                                    onClick={() => {
                                        setSelectedProduct(product);
                                        setCurrentScreen('product');
                                    }}
                                    className="bg-white rounded-lg shadow hover:shadow-lg transition cursor-pointer overflow-hidden"
                                >
                                    <div className="aspect-square bg-gradient-to-br from-green-50 to-green-100 flex items-center justify-center text-6xl">
                                        {product.image}
                                    </div>
                                    <div className="p-3">
                                        <h3 className="font-semibold text-sm mb-1 line-clamp-2">{product.name}</h3>
                                        <p className="text-xs text-gray-500 mb-2">{product.category}</p>
                                        <div className="flex items-center justify-between">
                                            <span className="text-green-600 font-bold">â‚¹{product.price}</span>
                                            <button
                                                onClick={(e) => {
                                                    e.stopPropagation();
                                                    addToCart(product);
                                                }}
                                                className="bg-green-600 text-white px-3 py-1 rounded text-sm font-medium hover:bg-green-700"
                                            >
                                                Add
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );

            const ProductScreen = () => {
                if (!selectedProduct) return null;
                return (
                    <div className="pb-20">
                        <Header title="Product Details" showBack={true} />
                        
                        <div className="max-w-4xl mx-auto">
                            <div className="aspect-square bg-gradient-to-br from-green-50 to-green-100 flex items-center justify-center">
                                <span className="text-9xl">{selectedProduct.image}</span>
                            </div>
                            
                            <div className="p-6 bg-white">
                                <div className="flex items-start justify-between mb-2">
                                    <h2 className="text-2xl font-bold flex-1">{selectedProduct.name}</h2>
                                    <span className="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">
                                        {selectedProduct.category}
                                    </span>
                                </div>
                                
                                <div className="flex items-center gap-2 mb-4">
                                    <div className="flex text-yellow-400">
                                        {[...Array(5)].map((_, i) => <Icon key={i} name="star" size={16} />)}
                                    </div>
                                    <span className="text-sm text-gray-600">(4.8) â€¢ 127 reviews</span>
                                </div>

                                <p className="text-gray-600 mb-6 leading-relaxed">{selectedProduct.description}</p>
                                
                                <div className="bg-green-50 rounded-lg p-4 mb-6">
                                    <div className="flex items-center gap-2 mb-2">
                                        <Icon name="check" size={20} className="text-green-600" />
                                        <span className="font-medium">100% Natural Bamboo</span>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <Icon name="check" size={20} className="text-green-600" />
                                        <span className="font-medium">Handcrafted by Local Artisans</span>
                                    </div>
                                </div>

                                <div className="flex items-center justify-between py-4 border-t">
                                    <div>
                                        <p className="text-sm text-gray-500">Price</p>
                                        <p className="text-3xl font-bold text-green-600">â‚¹{selectedProduct.price}</p>
                                    </div>
                                    <button
                                        onClick={() => {
                                            addToCart(selectedProduct);
                                            setCurrentScreen('cart');
                                        }}
                                        className="bg-green-600 text-white px-8 py-4 rounded-lg font-semibold hover:bg-green-700 transition flex items-center gap-2"
                                    >
                                        <Icon name="shoppingCart" size={20} />
                                        Add to Cart
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            const CartScreen = () => (
                <div className="pb-20">
                    <Header title="Your Cart" showBack={true} />
                    
                    {cart.length === 0 ? (
                        <div className="flex flex-col items-center justify-center py-20 px-4">
                            <Icon name="shoppingCart" size={64} className="text-gray-300 mb-4" />
                            <h3 className="text-xl font-semibold text-gray-600 mb-2">Your cart is empty</h3>
                            <p className="text-gray-500 mb-6">Add some beautiful bamboo products!</p>
                            <button
                                onClick={() => setCurrentScreen('home')}
                                className="bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700"
                            >
                                Start Shopping
                            </button>
                        </div>
                    ) : (
                        <div className="max-w-4xl mx-auto p-4">
                            <div className="bg-white rounded-lg shadow mb-4">
                                {cart.map(item => (
                                    <div key={item.id} className="flex items-center gap-4 p-4 border-b last:border-b-0">
                                        <div className="w-20 h-20 bg-gradient-to-br from-green-50 to-green-100 rounded flex items-center justify-center text-3xl flex-shrink-0">
                                            {item.image}
                                        </div>
                                        <div className="flex-1 min-w-0">
                                            <h3 className="font-semibold truncate">{item.name}</h3>
                                            <p className="text-green-600 font-bold">â‚¹{item.price}</p>
                                        </div>
                                        <div className="flex items-center gap-2">
                                            <button
                                                onClick={() => updateQuantity(item.id, -1)}
                                                className="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200"
                                            >
                                                <Icon name="minus" size={16} />
                                            </button>
                                            <span className="w-8 text-center font-semibold">{item.quantity}</span>
                                            <button
                                                onClick={() => updateQuantity(item.id, 1)}
                                                className="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center hover:bg-green-200"
                                            >
                                                <Icon name="plus" size={16} />
                                            </button>
                                            <button
                                                onClick={() => removeFromCart(item.id)}
                                                className="ml-2 w-8 h-8 bg-red-50 rounded-full flex items-center justify-center hover:bg-red-100 text-red-600"
                                            >
                                                <Icon name="trash" size={16} />
                                            </button>
                                        </div>
                                    </div>
                                ))}
                            </div>

                            <div className="bg-white rounded-lg shadow p-4 mb-4">
                                <h3 className="font-semibold mb-3">Bill Details</h3>
                                <div className="space-y-2">
                                    <div className="flex justify-between">
                                        <span className="text-gray-600">Item Total</span>
                                        <span className="font-medium">â‚¹{getCartTotal()}</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-gray-600">Delivery Fee</span>
                                        <span className="font-medium text-green-600">FREE</span>
                                    </div>
                                    <div className="border-t pt-2 flex justify-between text-lg font-bold">
                                        <span>Total</span>
                                        <span className="text-green-600">â‚¹{getCartTotal()}</span>
                                    </div>
                                </div>
                            </div>

                            <button
                                onClick={() => setCurrentScreen('checkout')}
                                className="w-full bg-green-600 text-white py-4 rounded-lg font-semibold hover:bg-green-700 transition"
                            >
                                Proceed to Checkout
                            </button>
                        </div>
                    )}
                </div>
            );

            const CheckoutScreen = () => (
                <div className="pb-20">
                    <Header title="Checkout" showBack={true} />
                    
                    <div className="max-w-4xl mx-auto p-4">
                        {checkoutStep === 'details' && (
                            <div className="bg-white rounded-lg shadow p-6">
                                <h3 className="text-xl font-semibold mb-4">Delivery Details</h3>
                                <div className="space-y-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">Full Name</label>
                                        <input
                                            type="text"
                                            value={userInfo.name}
                                            onChange={(e) => saveUserInfo({ ...userInfo, name: e.target.value })}
                                            className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                                            placeholder="Enter your name"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
                                        <input
                                            type="tel"
                                            value={userInfo.phone}
                                            onChange={(e) => saveUserInfo({ ...userInfo, phone: e.target.value })}
                                            className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                                            placeholder="10-digit mobile number"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">Delivery Address</label>
                                        <textarea
                                            value={userInfo.address}
                                            onChange={(e) => saveUserInfo({ ...userInfo, address: e.target.value })}
                                            className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 h-24"
                                            placeholder="House/Flat, Area, Landmark"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">Pincode</label>
                                        <input
                                            type="text"
                                            value={userInfo.pincode}
                                            onChange={(e) => saveUserInfo({ ...userInfo, pincode: e.target.value })}
                                            className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                                            placeholder="6-digit pincode"
                                        />
                                    </div>
                                    <button
                                        onClick={() => {
                                            if (userInfo.name && userInfo.phone && userInfo.address && userInfo.pincode) {
                                                setCheckoutStep('payment');
                                            } else {
                                                alert('Please fill all details');
                                            }
                                        }}
                                        className="w-full bg-green-600 text-white py-4 rounded-lg font-semibold hover:bg-green-700 transition"
                                    >
                                        Continue to Payment
                                    </button>
                                </div>
                            </div>
                        )}

                        {checkoutStep === 'payment' && (
                            <div className="space-y-4">
                                <div className="bg-white rounded-lg shadow p-6">
                                    <h3 className="text-xl font-semibold mb-4">Payment Method</h3>
                                    <div className="space-y-3">
                                        <button className="w-full p-4 border-2 border-green-600 rounded-lg text-left hover:bg-green-50 transition">
                                            <div className="font-semibold">Cash on Delivery</div>
                                            <div className="text-sm text-gray-600">Pay when you receive</div>
                                        </button>
                                    </div>
                                </div>

                                <div className="bg-white rounded-lg shadow p-6">
                                    <h3 className="font-semibold mb-3">Order Summary</h3>
                                    <div className="space-y-2 text-sm mb-4">
                                        {cart.map(item => (
                                            <div key={item.id} className="flex justify-between">
                                                <span className="text-gray-600">{item.name} Ã— {item.quantity}</span>
                                                <span className="font-medium">â‚¹{item.price * item.quantity}</span>
                                            </div>
                                        ))}
                                    </div>
                                    <div className="border-t pt-3 flex justify-between text-lg font-bold">
                                        <span>Total Amount</span>
                                        <span className="text-green-600">â‚¹{getCartTotal()}</span>
                                    </div>
                                </div>

                                <button
                                    onClick={placeOrder}
                                    className="w-full bg-green-600 text-white py-4 rounded-lg font-semibold hover:bg-green-700 transition"
                                >
                                    Place Order
                                </button>
                            </div>
                        )}
                    </div>
                </div>
            );

            const OrderConfirmScreen = () => (
                <div className="pb-20">
                    <Header title="Order Confirmed" />
                    
                    <div className="max-w-4xl mx-auto p-4 flex flex-col items-center justify-center py-12">
                        <div className="w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mb-6">
                            <Icon name="check" size={48} className="text-green-600" />
                        </div>
                        <h2 className="text-2xl font-bold mb-2">Order Placed Successfully!</h2>
                        <p className="text-gray-600 text-center mb-8">Your bamboo products will be delivered soon</p>
                        
                        <div className="bg-white rounded-lg shadow p-6 w-full mb-6">
                            <h3 className="font-semibold mb-3">Delivery Address</h3>
                            <div className="space-y-1 text-gray-600">
                                <p className="font-medium text-black">{userInfo.name}</p>
                                <p>{userInfo.phone}</p>
                                <p>{userInfo.address}</p>
                                <p>{userInfo.pincode}</p>
                            </div>
                        </div>

                        <button
                            onClick={() => setCurrentScreen('orders')}
                            className="w-full bg-green-600 text-white py-4 rounded-lg font-semibold hover:bg-green-700 transition mb-3"
                        >
                            Track Order
                        </button>
                        <button
                            onClick={() => setCurrentScreen('home')}
                            className="w-full bg-gray-100 text-gray-700 py-4 rounded-lg font-semibold hover:bg-gray-200 transition"
                        >
                            Continue Shopping
                        </button>
                    </div>
                </div>
            );

            const OrdersScreen = () => (
                <div className="pb-20">
                    <Header title="My Orders" />
                    
                    {orders.length === 0 ? (
                        <div className="flex flex-col items-center justify-center py-20 px-4">
                            <Icon name="package" size={64} className="text-gray-300 mb-4" />
                            <h3 className="text-xl font-semibold text-gray-600 mb-2">No orders yet</h3>
                            <p className="text-gray-500 mb-6">Start shopping for bamboo products!</p>
                            <button
                                onClick={() => setCurrentScreen('home')}
                                className="bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700"
                            >
                                Browse Products
                            </button>
                        </div>
                    ) : (
                        <div className="max-w-4xl mx-auto p-4 space-y-4">
                            {orders.map(order => (
                                <div key={order.id} className="bg-white rounded-lg shadow p-4">
                                    <div className="flex justify-between items-start mb-3">
                                        <div>
                                            <p className="font-semibold">Order #{order.id.toString().slice(-6)}</p>
                                            <p className="text-sm text-gray-500">{order.date} â€¢ {order.time}</p>
                                        </div>
                                        <span className="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">
                                            {order.status}
                                        </span>
                                    </div>
                                    <div className="space-y-2 mb-3">
                                        {order.items.map(item => (
                                            <div key={item.id} className="flex justify-between text-sm">
                                                <span className="text-gray-600">{item.name} Ã— {item.quantity}</span>
                                                <span className="font-medium">â‚¹{item.price * item.quantity}</span>
                                            </div>
                                        ))}
                                    </div>
                                    <div className="border-t pt-3 flex justify-between font-semibold">
                                        <span>Total</span>
                                        <span className="text-green-600">â‚¹{order.total}</span>
                                    </div>
                                    <div className="mt-3 text-sm text-gray-600">
                                        <p className="font-medium">Delivery to:</p>
                                        <p>{order.user.name} â€¢ {order.user.phone}</p>
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );

            const ProfileScreen = () => (
                <div className="pb-20">
                    <Header title="Profile" />
                    
                    <div className="max-w-4xl mx-auto p-4">
                        <div className="bg-white rounded-lg shadow p-6 mb-4">
                            <div className="flex items-center gap-4 mb-6">
                                <div className="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center">
                                    <Icon name="user" size={40} className="text-green-600" />
                                </div>
                                <div>
                                    <h3 className="text-xl font-semibold">{userInfo.name || 'Guest User'}</h3>
                                    <p className="text-gray-600">{userInfo.phone || 'No phone added'}</p>
                                </div>
                            </div>
                            
                            {userInfo.address && (
                                <div className="mb-4">
                                    <h4 className="font-semibold mb-2 flex items-center gap-2">
                                        <Icon name="mapPin" size={18} className="text-green-600" />
                                        Saved Address
                                    </h4>
                                    <p className="text-gray-600">{userInfo.address}</p>
                                    <p className="text-gray-600">Pincode: {userInfo.pincode}</p>
                                </div>
                            )}
                        </div>

                        <div className="bg-white rounded-lg shadow divide-y">
                            <button className="w-full p-4 flex items-center gap-3 hover:bg-gray-50 transition text-left">
                                <Icon name="phone" size={20} className="text-green-600" />
                                <div className="flex-1">
                                    <p className="font-medium">Contact Us</p>
                                    <p className="text-sm text-gray-600">Get help with your order</p>
                                </div>
                            </button>
                            
                            <button className="w-full p-4 flex items-center gap-3 hover:bg-gray-50 transition text-left">
                                <Icon name="mail" size={20} className="text-green-600" />
                                <div className="flex-1">
                                    <p className="font-medium">Email Support</p>
                                    <p className="text-sm text-gray-600">bamboomart@example.com</p>
                                </div>
                            </button>
                            
                            <button className="w-full p-4 flex items-center gap-3 hover:bg-gray-50 transition text-left">
                                <Icon name="mapPin" size={20} className="text-green-600" />
                                <div className="flex-1">
                                    <p className="font-medium">Delivery Areas</p>
                                    <p className="text-sm text-gray-600">We deliver across your city</p>
                                </div>
                            </button>
                        </div>

                        <div className="mt-6 bg-green-50 rounded-lg p-4">
                            <h4 className="font-semibold text-green-800 mb-2">ðŸŽ‹ About BambooMart</h4>
                            <p className="text-sm text-green-700">
                                Your trusted local source for authentic handcrafted bamboo products. 
                                Supporting local artisans and delivering quality craftsmanship to your doorstep.
                            </p>
                        </div>
                    </div>
                </div>
            );

            const AdminScreen = () => (
                <div className="pb-20">
                    <Header title="Admin Panel" showBack={true} />
                    
                    <div className="max-w-4xl mx-auto p-4">
                        <div className="bg-white rounded-lg shadow p-6 mb-4">
                            <h3 className="text-xl font-semibold mb-4">Quick Stats</h3>
                            <div className="grid grid-cols-2 gap-4">
                                <div className="bg-green-50 p-4 rounded-lg">
                                    <p className="text-sm text-gray-600">Total Products</p>
                                    <p className="text-2xl font-bold text-green-600">{products.length}</p>
                                </div>
                                <div className="bg-blue-50 p-4 rounded-lg">
                                    <p className="text-sm text-gray-600">Total Orders</p>
                                    <p className="text-2xl font-bold text-blue-600">{orders.length}</p>
                                </div>
                            </div>
                        </div>

                        <div className="bg-white rounded-lg shadow p-6 mb-4">
                            <div className="flex items-center justify-between mb-4">
                                <h3 className="text-xl font-semibold">Manage Products</h3>
                                <button
                                    onClick={addProduct}
                                    className="bg-green-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-green-700 flex items-center gap-2"
                                >
                                    <Icon name="plus" size={20} />
                                    Add Product
                                </button>
                            </div>
                            
                            <div className="space-y-3">
                                {products.map(product => (
                                    <div key={product.id} className="flex items-center gap-3 p-3 border rounded-lg">
                                        <div className="w-12 h-12 bg-gradient-to-br from-green-50 to-green-100 rounded flex items-center justify-center text-2xl flex-shrink-0">
                                            {product.image}
                                        </div>
                                        <div className="flex-1 min-w-0">
                                            <h4 className="font-semibold truncate">{product.name}</h4>
                                            <p className="text-sm text-gray-600">â‚¹{product.price} â€¢ {product.category}</p>
                                        </div>
                                        <div className="flex items-center gap-2">
                                            <button
                                                onClick={() => toggleProductStock(product.id)}
                                                className={`px-3 py-1 rounded text-sm font-medium ${
                                                    product.inStock
                                                        ? 'bg-green-100 text-green-800'
                                                        : 'bg-gray-100 text-gray-800'
                                                }`}
                                            >
                                                {product.inStock ? 'In Stock' : 'Out of Stock'}
                                            </button>
                                            <button
                                                onClick={() => setEditingProduct(product)}
                                                className="p-2 hover:bg-gray-100 rounded"
                                            >
                                                <Icon name="edit" size={18} className="text-blue-600" />
                                            </button>
                                            <button
                                                onClick={() => deleteProduct(product.id)}
                                                className="p-2 hover:bg-gray-100 rounded"
                                            >
                                                <Icon name="trash" size={18} className="text-red-600" />
                                            </button>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        <div className="bg-white rounded-lg shadow p-6">
                            <h3 className="text-xl font-semibold mb-4">Recent Orders</h3>
                            <div className="space-y-3">
                                {orders.slice(0, 10).map(order => (
                                    <div key={order.id} className="p-3 border rounded-lg">
                                        <div className="flex justify-between items-start mb-2">
                                            <div>
                                                <p className="font-semibold">Order #{order.id.toString().slice(-6)}</p>
                                                <p className="text-sm text-gray-600">{order.user.name} â€¢ {order.user.phone}</p>
                                            </div>
                                            <div className="flex flex-col items-end gap-2">
                                                <span className="font-bold text-green-600">â‚¹{order.total}</span>
                                                <select
                                                    value={order.status}
                                                    onChange={(e) => updateOrderStatus(order.id, e.target.value)}
                                                    className="text-sm border border-gray-300 rounded px-2 py-1"
                                                >
                                                    <option>Ordered</option>
                                                    <option>Packed</option>
                                                    <option>Out for Delivery</option>
                                                    <option>Delivered</option>
                                                    <option>Cancelled</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div className="text-sm text-gray-600">
                                            <p>{order.items.length} items â€¢ {order.date}</p>
                                            <p className="truncate">{order.user.address}</p>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );

            const AdminLoginModal = () => (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                    <div className="bg-white rounded-lg p-6 max-w-sm w-full">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="text-xl font-semibold">Admin Login</h3>
                            <button onClick={() => {
                                setShowAdminLogin(false);
                                setAdminPassword('');
                            }} className="p-1 hover:bg-gray-100 rounded">
                                <Icon name="x" size={20} />
                            </button>
                        </div>
                        <div className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">Password</label>
                                <input
                                    type="password"
                                    value={adminPassword}
                                    onChange={(e) => setAdminPassword(e.target.value)}
                                    onKeyPress={(e) => e.key === 'Enter' && handleAdminLogin()}
                                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                                    placeholder="Enter admin password"
                                    autoFocus
                                />
                            </div>
                            <button
                                onClick={handleAdminLogin}
                                className="w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 flex items-center justify-center gap-2"
                            >
                                <Icon name="logIn" size={20} />
                                Login
                            </button>
                        </div>
                    </div>
                </div>
            );

            const ProductEditModal = () => (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto">
                    <div className="bg-white rounded-lg p-6 max-w-md w-full my-8">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="text-xl font-semibold">Edit Product</h3>
                            <button onClick={() => setEditingProduct(null)} className="p-1 hover:bg-gray-100 rounded">
                                <Icon name="x" size={20} />
                            </button>
                        </div>
                        <div className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">Product Name</label>
                                <input
                                    type="text"
                                    value={editingProduct.name}
                                    onChange={(e) => setEditingProduct({ ...editingProduct, name: e.target.value })}
                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                                />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">Category</label>
                                <select
                                    value={editingProduct.category}
                                    onChange={(e) => setEditingProduct({ ...editingProduct, category: e.target.value })}
                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                                >
                                    {categories.filter(c => c !== 'All').map(cat => (
                                        <option key={cat} value={cat}>{cat}</option>
                                    ))}
                                </select>
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">Price (â‚¹)</label>
                                <input
                                    type="number"
                                    value={editingProduct.price}
                                    onChange={(e) => setEditingProduct({ ...editingProduct, price: parseInt(e.target.value) || 0 })}
                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                                />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">Emoji Icon</label>
                                <input
                                    type="text"
                                    value={editingProduct.image}
                                    onChange={(e) => setEditingProduct({ ...editingProduct, image: e.target.value })}
                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                                    placeholder="ðŸŽ‹"
                                />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">Description</label>
                                <textarea
                                    value={editingProduct.description}
                                    onChange={(e) => setEditingProduct({ ...editingProduct, description: e.target.value })}
                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 h-20"
                                />
                            </div>
                            <div className="flex items-center gap-2">
                                <input
                                    type="checkbox"
                                    id="inStock"
                                    checked={editingProduct.inStock}
                                    onChange={(e) => setEditingProduct({ ...editingProduct, inStock: e.target.checked })}
                                    className="w-4 h-4"
                                />
                                <label htmlFor="inStock" className="text-sm font-medium text-gray-700">In Stock</label>
                            </div>
                            <button
                                onClick={saveProduct}
                                className="w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 flex items-center justify-center gap-2"
                            >
                                <Icon name="save" size={20} />
                                Save Product
                            </button>
                        </div>
                    </div>
                </div>
            );

            return (
                <div className="min-h-screen bg-gray-50">
                    {currentScreen === 'home' && <HomeScreen />}
                    {currentScreen === 'product' && <ProductScreen />}
                    {currentScreen === 'cart' && <CartScreen />}
                    {currentScreen === 'checkout' && <CheckoutScreen />}
                    {currentScreen === 'orderConfirm' && <OrderConfirmScreen />}
                    {currentScreen === 'orders' && <OrdersScreen />}
                    {currentScreen === 'profile' && <ProfileScreen />}
                    {currentScreen === 'admin' && isAdmin && <AdminScreen />}
                    
                    {currentScreen !== 'admin' && <BottomNav />}
                    {showAdminLogin && <AdminLoginModal />}
                    {editingProduct && <ProductEditModal />}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
