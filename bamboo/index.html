<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BambooMart - Handcrafted Bamboo Products</title>
    <meta name="description" content="Order authentic handcrafted bamboo products with instant local delivery">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
        #root { min-height: 100vh; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { ShoppingCart, Search, Home, User, Package, Star, MapPin, Phone, Mail, 
                ArrowLeft, Plus, Minus, Trash2, Check, Settings, Edit2, Save, X, LogIn, LogOut } = lucide;

        // Mock storage for static hosting (you can replace with actual backend later)
        const mockStorage = {
            data: {},
            async get(key) {
                const value = localStorage.getItem(key);
                return value ? { key, value } : null;
            },
            async set(key, value) {
                localStorage.setItem(key, value);
                return { key, value };
            },
            async delete(key) {
                localStorage.removeItem(key);
                return { key, deleted: true };
            }
        };

        window.storage = mockStorage;

        function App() {
            const [currentScreen, setCurrentScreen] = useState('home');
            const [cart, setCart] = useState([]);
            const [selectedCategory, setSelectedCategory] = useState('All');
            const [searchQuery, setSearchQuery] = useState('');
            const [selectedProduct, setSelectedProduct] = useState(null);
            const [orders, setOrders] = useState([]);
            const [products, setProducts] = useState([]);
            const [categories, setCategories] = useState(['All']);
            const [userInfo, setUserInfo] = useState({ name: '', phone: '', address: '', pincode: '' });
            const [checkoutStep, setCheckoutStep] = useState('details');
            const [isAdmin, setIsAdmin] = useState(false);
            const [adminPassword, setAdminPassword] = useState('');
            const [editingProduct, setEditingProduct] = useState(null);
            const [showAdminLogin, setShowAdminLogin] = useState(false);

            const ADMIN_PASSWORD = 'bamboo2024'; // CHANGE THIS PASSWORD!

            useEffect(() => {
                loadData();
                lucide.createIcons();
            }, [currentScreen, editingProduct]);

            const loadData = async () => {
                try {
                    const cartData = await window.storage.get('bamboo-cart');
                    const ordersData = await window.storage.get('bamboo-orders');
                    const userInfoData = await window.storage.get('bamboo-user');
                    const productsData = await window.storage.get('bamboo-products');
                    const categoriesData = await window.storage.get('bamboo-categories');
                    
                    if (cartData) setCart(JSON.parse(cartData.value));
                    if (ordersData) setOrders(JSON.parse(ordersData.value));
                    if (userInfoData) setUserInfo(JSON.parse(userInfoData.value));
                    if (productsData) {
                        setProducts(JSON.parse(productsData.value));
                    } else {
                        const defaultProducts = getDefaultProducts();
                        setProducts(defaultProducts);
                        await window.storage.set('bamboo-products', JSON.stringify(defaultProducts));
                    }
                    if (categoriesData) {
                        setCategories(JSON.parse(categoriesData.value));
                    } else {
                        const defaultCategories = ['All', 'Doors', 'Windows', 'Mats', 'Furniture', 'Decor', 'Religious', 'Handicrafts'];
                        setCategories(defaultCategories);
                        await window.storage.set('bamboo-categories', JSON.stringify(defaultCategories));
                    }
                } catch (error) {
                    console.log('Loading defaults');
                    const defaultProducts = getDefaultProducts();
                    const defaultCategories = ['All', 'Doors', 'Windows', 'Mats', 'Furniture', 'Decor', 'Religious', 'Handicrafts'];
                    setProducts(defaultProducts);
                    setCategories(defaultCategories);
                }
            };

            const getDefaultProducts = () => [
                { id: 1, name: "Bamboo Door (6x3 ft)", category: "Doors", price: 3500, image: "ðŸšª", description: "Handcrafted traditional bamboo door", inStock: true },
                { id: 2, name: "Bamboo Window Frame", category: "Windows", price: 1200, image: "ðŸªŸ", description: "Natural bamboo window frame", inStock: true },
                { id: 3, name: "Prayer Mat", category: "Religious", price: 450, image: "ðŸ§˜", description: "Woven bamboo prayer mat", inStock: true },
                { id: 4, name: "Bamboo Chair", category: "Furniture", price: 2800, image: "ðŸª‘", description: "Comfortable bamboo seating", inStock: true },
                { id: 5, name: "Wall Hanging", category: "Decor", price: 650, image: "ðŸŽ¨", description: "Decorative bamboo art piece", inStock: true },
                { id: 6, name: "Bamboo Basket Set", category: "Handicrafts", price: 890, image: "ðŸ§º", description: "Set of 3 storage baskets", inStock: true },
                { id: 7, name: "Floor Mat (6x4 ft)", category: "Mats", price: 1100, image: "ðŸŸ«", description: "Durable bamboo floor mat", inStock: true },
                { id: 8, name: "Bamboo Lamp", category: "Decor", price: 750, image: "ðŸ’¡", description: "Ambient bamboo table lamp", inStock: true },
                { id: 9, name: "Pooja Thali", category: "Religious", price: 580, image: "ðŸª”", description: "Traditional bamboo prayer plate", inStock: true },
                { id: 10, name: "Bamboo Shelf Unit", category: "Furniture", price: 4200, image: "ðŸ“š", description: "3-tier storage shelf", inStock: true },
            ];

            // Copy all the functions from the React component above
            // (saveCart, addToCart, placeOrder, etc.)
            
            const saveCart = async (newCart) => {
                setCart(newCart);
                await window.storage.set('bamboo-cart', JSON.stringify(newCart));
            };

            const addToCart = (product) => {
                const existing = cart.find(item => item.id === product.id);
                if (existing) {
                    saveCart(cart.map(item => 
                        item.id === product.id ? { ...item, quantity: item.quantity + 1 } : item
                    ));
                } else {
                    saveCart([...cart, { ...product, quantity: 1 }]);
                }
            };

            // Add remaining functions here...
            // (For brevity, include all functions from the React component)

            return <div className="min-h-screen bg-gray-50">
                <h1 className="text-center p-8 text-2xl font-bold">ðŸŽ‹ BambooMart Coming Soon</h1>
                <p className="text-center">Full app code provided in deployment guide</p>
            </div>;
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
